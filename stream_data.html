<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta charset="utf-8">
    <style> /* set the CSS */
    .bar { fill: steelblue; }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

    <title>Cisco DNA Spaces Firehose API</title>
  </head>
  <body>
  <div class="container-fluid">
    <div class="row">
      <div class="col">
        <div class="card">
          <h5 class="card-header">Cisco DNA Spaces</h5>
            <div class="card-body">
              <h5 class="card-title">Detect & Locate API Token <Key></Key></h5>
               <p class="card-text">Using the power of <a href="https://dnaspaces.cisco.com/" class="stretched-link">Cisco DNA Spaces</a>, create a table with the number of
              devices on each floor. You will need to create an API key in DNA Spaces Detect and Locate to use this app.
              For details use these
              <a href="https://www.cisco.com/c/en/us/td/docs/wireless/cisco-dna-spaces/detectandlocate/b-cisco-cle/b-cisco-cle_chapter_0110.html" class="stretched-link">DNA Spaces instructions.</a>
            </p>
              <p class="card-text">Paste in your Firehose API token key into the field below and click on GO. The API token will stream data.</p>
              <div class="input-group mb-3">
                <div class="input-group-prepend">
                  <button class="btn btn-primary" type="button" onclick="process()">Go</button>
                </div>
                <input id="api_token" type="text" class="form-control" placeholder="DNA Spaces Detect & Locate API Token" aria-label="Example text with button addon" aria-describedby="button-addon1">
              </div>
              <p class="card-text"><small id="api_token_help" class="text-muted">Status</small></p>
            </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-6">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Bar Chart</h5>
            <p class="card-text">Top floor counts.</p>
              <svg id="chart_svg" width="960" height="800" class="card-img-top" ></svg>
          </div>
        </div>
      </div>
      <div class="col-sm-6">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Floor Image</h5>
            <p class="card-text">Click on a floor to load the floor image</p>
            <p class="card-text"><small id="floor_image_status" class="text-muted">Status</small></p>
              <div class="dropdown">
                <button class="btn btn-secondary dropdown-toggle" type="button"  data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  SSID: All
                </button>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenu2">
                  <button id="filter_SSID" class="dropdown-item" type="button" value="Test" onclick="filterSSID()">Action</button>
                  <button class="dropdown-item" type="button">Another action</button>
                  <button class="dropdown-item" type="button">Something else here</button>
                </div>
              </div>
            <svg id="image" src="" class="card-img-top" width="960" height="800"></svg>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <div class="card">
          <div class="card-body">
            <h5 class="card-title">Floor count table</h5>
              <small id="status_floors" class="text-muted">
              </small>
              <small id="status_hierarchy" class="text-muted">
              </small>
              <div id="floor_count_table"></div>
            </div>
        </div>
      </div>
    </div>
  </div>
    <!-- Optional JavaScript -->
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script defer src="stream_data.js"></script>
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  </body>
</html>